{% load shop_extras %}

<h2>Sales Invoice</h2>

<p><strong>Invoice No:</strong> {{ sale.id }}</p>
<p><strong>Sold By:</strong> {{ sale.sold_by.username|default:"N/A" }}</p>
<p><strong>Date Sold:</strong> {{ sale.date_sold|date:"Y-m-d H:i" }}</p>

<h3>Items Sold</h3>
<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <th>Product</th>
        <th>Quantity</th>
        <th>Price (each)</th>
        <th>Line Total</th>
    </thead>
    
    {% for item in items %}
    <tr>
        <td>{{ item.product.name }}</td>
        <td>{{ item.quantity_sold }}</td>
        <td>${{ item.price_at_sale }}</td>
        <td>${{ item.price_at_sale|multiply:item.quantity_sold|floatformat:2 }}</td>
    </tr>
    {% endfor %}
</table>

<p><strong>Total Amount:</strong> ${{ sale.total_amount }}</p>

<br>
<button onclick="window.print()">Print Invoice</button>

<br><br>
<a href="#">Back to Dashboard</a>
